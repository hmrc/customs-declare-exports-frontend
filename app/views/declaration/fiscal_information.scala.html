@*
 * Copyright 2020 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import controllers.declaration.routes._
@import forms.declaration.FiscalInformation
@import forms.declaration.FiscalInformation.AllowedFiscalInformationAnswers._
@import uk.gov.hmrc.play.views.html._
@import views.components.inputs.RadioOption
@import views.Title
@import controllers.navigation.Navigator
@import models.requests.JourneyRequest
@import controllers.navigation.ItemId

@this(main_template: views.html.main_template)

@(mode: Mode, itemId: String, form: Form[FiscalInformation])(implicit request: JourneyRequest[_], messages: Messages)

@tariffBodyDesc = { @Html(messages("declaration.type.fiscalInformationSummaryText",  components.details_content_link())) }

@main_template(
    title = Title("declaration.fiscalInformation.title", "declaration.fiscalInformation.header")
) {

    @components.back_link(Navigator.backLink(FiscalInformation, mode, ItemId(itemId)), mode)

    @components.error_summary(form.errors)

    @components.heading(
        sectionHeader = messages("declaration.fiscalInformation.header"),
        title = messages("declaration.fiscalInformation.title")
    )

    <p>
        If you have entered a procedure code which starts ‘10 42’, please state whether you would like to claim for OSR.
    </p><br>

    <details class="details-font" role="group">
        <summary class="govuk-details__summary" role="button" aria-controls="details-content-b789d1b8-fdb1-4d59-970d-d1d42eafa90f" aria-expanded="false">
            <span class="govuk-details__summary-text">
                You can claim OSR if:
            </span>
        </summary>
        <ul class="list list-bullet grey-border-left">
            <li>you are VAT registered in the UK</li>
            <li>you regularly import goods</li>
            <li>you are an agent registered for VAT in the UK and you have been appointed to act on behalf of an importer based in another country, who is not registered for VAT in the UK</li>
            <li>you imported the goods no more than one month ago</li>
            <li>the goods exported should be exactly the same as when they were imported</li>
        </ul>
    </details>
    <br>

    @helper.form(FiscalInformationController.saveFiscalInformation(mode, itemId), 'autoComplete -> "off") {
        @helper.CSRF.formField

        @components.fields.field_radio(
            field = form("onwardSupplyRelief"),
            legend = messages("declaration.fiscalInformation.question"),
            inputs = Seq(
                RadioOption("Yes", yes, messages("site.yes")),
                RadioOption("No", no, messages("site.no"))
            )
        )
        @components.details(messages("site.details.summary_text_this"), Some(tariffBodyDesc))
        @components.submit_button()
        @components.buttons.save_and_return_later_button()
    }
}