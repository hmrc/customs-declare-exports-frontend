@*
 * Copyright 2020 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import config.ExternalServicesConfig
@import controllers.routes._
@import uk.gov.hmrc.govukfrontend.views.html.components._
@import views.html.components.gds._
@import views.Title

@this(
    govukLayout: gdsMainTemplate,
    pageTitle: pageTitle,
    sectionHeader: sectionHeader,
    paragraphBody: paragraphBody,
    link: link,
    dashList: dashList,
    bulletList: bulletList,
    govukInsetText: GovukInsetText,
    govukButton: GovukButton,
    externalServicesConfig: ExternalServicesConfig
)

@()(implicit request: Request[_], messages: Messages)

@linkText = @{link(
    id = Some("hmrc_link"),
    text = messages("startPage.hmrcUrl"),
    call = Call("GET", externalServicesConfig.organisationsUrl),
    target = "_blank",
    classes = "govuk-link govuk-link--no-visited-state govuk-!-font-weight-bold"
)}

@commodityCodeLink = @{
    link(
        text = messages("startPage.informationYouNeed.listItem.3.link"),
        call = Call("GET", externalServicesConfig.commodityCodesUrl)
    )
}

@licencesLink = @{
    link(
        text = messages("startPage.informationYouNeed.listItem.4.link"),
        call = Call("GET", externalServicesConfig.relevantLicensesUrl)
    )
}

@serviceAvailabilityLink = @{
    link(
        text = messages("startPage.problemsWithServiceNotice.link"),
        call = Call("GET", externalServicesConfig.serviceAvailabilityUrl)
    )
}

@movementsLink = @{
    link(
        text = messages("startPage.afterDeclaringGoods.link"),
        call = Call("GET", externalServicesConfig.customsMovementsFrontendUrl)
    )
}

@eoriLink = @{
    link(
        text = messages("startPage.beforeYouStart.line.1.link"),
        call = Call("GET", externalServicesConfig.eoriService)
    )
}

@govukLayout(
    title = Title("startPage.title"),
    useCustomContentWidth = true
) {

    <div class="govuk-!-width-two-thirds">
        @sectionHeader(messages("startPage.title.sectionHeader"))
        @pageTitle(text = messages("startPage.title"))
        @paragraphBody(message = messages("startPage.description"), classes = "govuk-body-l", id = Some("description"))
    </div>

    <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

    <div class="govuk-!-width-two-thirds">
        <div class="govuk-!-margin-bottom-8">@messages("startPage.from") @linkText</div>

        <div id="contents">
            @dashList(
                title = "startPage.contents.header",
                elements = Seq(
                    (messages("startPage.beforeYouStart.header"), "#before-you-start"),
                    (messages("startPage.informationYouNeed.header"), "#information-you-need"),
                    (messages("startPage.makeDeclaration.header"), "#make-declaration"),
                    (messages("startPage.afterDeclaringGoods.header"), "#after-declaring-goods")
                )
            )
        </div>

        @bulletList(
            title = "startPage.useThisServiceTo.header",
            elements = Seq(
                messages("startPage.useThisServiceTo.listItem.1"),
                messages("startPage.useThisServiceTo.listItem.2"),
                messages("startPage.useThisServiceTo.listItem.3"),
                messages("startPage.useThisServiceTo.listItem.4")
            )
        )

        <div>
            <h2 id="before-you-start" class="govuk-heading-m">@messages("startPage.beforeYouStart.header")</h2>
            @paragraphBody(message = messages("startPage.beforeYouStart.line.1", eoriLink), id = Some("before-you-start-element-1"))
        </div>

        <div class="govuk-!-margin-bottom-9">
            @govukInsetText(InsetText(
                content = HtmlContent(messages("startPage.information"))
            ))
        </div>

        <div class="govuk-!-margin-bottom-9">
            <h2 id="information-you-need" class="govuk-heading-m">@messages("startPage.informationYouNeed.header")</h2>
            @bulletList(
                title = "startPage.informationYouNeed.line.1",
                elements = Seq(
                    messages("startPage.informationYouNeed.listItem.1"),
                    messages("startPage.informationYouNeed.listItem.2"),
                    messages("startPage.informationYouNeed.listItem.3", commodityCodeLink),
                    messages("startPage.informationYouNeed.listItem.4", licencesLink),
                    messages("startPage.informationYouNeed.listItem.5"),
                    messages("startPage.informationYouNeed.listItem.6")
                )
            )
        </div>

        <h2 id="make-declaration" class="govuk-heading-m">@messages("startPage.makeDeclaration.header")</h2>
        @govukInsetText(InsetText(
            content = HtmlContent(messages("startPage.problemsWithServiceNotice", serviceAvailabilityLink))
        ))

        @govukButton(
            Button(
                href = Some(ChoiceController.displayPage().url),
                isStartButton = true,
                content = Text(messages("startPage.buttonName"))
            )
        )

        <h2 id="after-declaring-goods" class="govuk-heading-m">@messages("startPage.afterDeclaringGoods.header")</h2>
        @paragraphBody(message = messages("startPage.afterDeclaringGoods", movementsLink), id = Some("after-declaring-goods-element"))

        <div class="govuk-!-margin-top-9" id="back-to-top">
            <a class="govuk-link" href="#contents">
                <svg class="app-c-back-to-top__icon" xmlns="http://www.w3.org/2000/svg" width="13" height="17" viewBox="0 0 13 17">
                    <path fill="currentColor" d="M6.5 0L0 6.5 1.4 8l4-4v12.7h2V4l4.3 4L13 6.4z"></path>
                </svg>
                @messages("startPage.contents.header")
            </a>
        </div>



        <div class="govuk-!-margin-top-7">
            <hr class="govuk-section-break govuk-section-break--visible blue-line">
            <nav role="navigation">
                @paragraphBody(messages("startPage.exploreTheTopic"), classes = "govuk-!-margin-top-0", id = Some("explore-the-topic"))
                <ul class="govuk-list">
                    <li>
                        <a class="govuk-link govuk-!-font-size-16" href="@{externalServicesConfig.importExports}">
                            @messages("startPage.importExport")
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
}