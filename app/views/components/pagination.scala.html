@*
 * Copyright 2020 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import views.components.PaginationUtil
@(id: String = "pagination",
        singularName: String = "result",
        pluralName: String = "results",
        pager: Paginated[_],
        onChange: Int => Call,
        containerClass: Option[String] = None,
        counterClass: Option[String] = None,
        linksClass: Option[String] = None
)

<div id="@id" class="grid-row">

    <div class="column-one-half  @containerClass.getOrElse("")">
    @if(pager.nonEmpty) {
        @if(pager.pageCount == 1) {
            <div id="@id-one" class="@counterClass.getOrElse("")">
                <span>Showing</span>
                <span id="@id-total" class="bold">@{pager.total}</span>
                <span>
                @if(pager.total == 1){
                    @singularName
                } else {
                    @pluralName
                }
                </span>
            </div>
        } else {
            <div id="@id-some" class="@counterClass.getOrElse("")">
                <span>Showing</span>
                <span id="@id-start">@{(pager.page.index-1) * pager.page.size + 1}</span>
                <span>-</span>
                <span id="@id-end">@{(pager.page.index-1) * pager.page.size + pager.size}</span>
                <span>of</span>
                <span id="@id-total" class="bold">@{pager.total}</span>
                <span>
                @if(pager.total == 1){
                    @singularName
                } else {
                    @pluralName
                }
                </span>
            </div>
        }
    } else {
        <div id="@id-none">
            <span>Showing</span>
            <span>no @{pluralName}</span>
        </div>
    }

    </div>

    @if(pager.pageCount > 1) {
        <div id="@id-links" class="column-one-half align-right @linksClass.getOrElse("")">
        @defining(pager.pageCount) { pageCount: Int =>
            @* Previous Page *@
            @if(pager.page.index > 1) {
                <a id="@id-page_back" class="mr-5" href="@onChange(pager.page.index - 1)">Previous</a>
            }

            @* Surrounding 5 Pages *@
            @for(pageIndex <- PaginationUtil.surroundingPages(pager.page.index, pager.pageCount, 5)) {
                @if(pageIndex == pager.page.index) {
                    <span id="@id-page_current" class="mx-5">@pageIndex</span>
                } else {
                    <a id="@id-page_@pageIndex" class="mx-5" href="@onChange(pageIndex)">@pageIndex</a>
                }
            }

            @* Next Page *@
            @if(pager.page.index < pageCount) {
                <a id="@id-page_next" class="ml-5" href="@onChange(pager.page.index + 1)">Next</a>
            }

        }
        </div>
    }
</div>
